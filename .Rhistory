plot.margin = unit(c(0,0,0,0), "cm"))
leg <- ggpubr::get_legend(leg)
lay <- rbind(c(NA,1,1,NA),
c(2,2,3,3),
c(2,2,3,3))
grid.arrange(leg,a,b, layout_matrix = lay)
a <- ggplot(OGs_sum, aes(x = as.factor(num_sources), y = max_d2_source, fill = as.factor(num_nutree))) +
geom_boxplot(show.legend = FALSE)+
labs(x = "Number of Sources", y = "Distance to Source")+
scale_fill_brewer(palette = "Greys")+
base_theme
b <- ggplot(run_data, aes(x = as.factor(num_sources), y = run_data$n_trees_available_end - run_data$n_trees_available_start, fill = as.factor(num_nutree)))+
geom_boxplot(show.legend = FALSE) +
scale_y_log10() +
scale_fill_brewer(palette = "Greys")+
labs(x = "Number of Sources", y = "N new trees")+
base_theme
leg <- ggplot(OGs_sum, aes(x = as.factor(num_sources), y = max_d2_source, fill = as.factor(num_nutree))) +
geom_boxplot() + scale_fill_brewer(palette = "Greys") +
labs(fill = "Number of Trees")+
theme(legend.direction = "horizontal",
legend.position = c(.5,.5),
legend.title = element_text(size = 6),
legend.text = element_text(size = 5),
legend.key.size = unit(.5, "line"),
plot.margin = unit(c(0,0,0,0), "cm"))
leg <- ggpubr::get_legend(leg)
lay <- rbind(c(NA,1,1,NA),
c(2,2,3,3),
c(2,2,3,3))
grid.arrange(leg,a,b, layout_matrix = lay)
max_d <- max(OGs_sum$max_d2_source)
max_d
max_d <- round(max(OGs_sum$max_d2_source),2)
max_d
max_d <- round(max(OGs_sum$max_d2_source))
max_d
sum(run_data$n_trees_available_end - run_data$n_trees_available_start > 0)
per_runs_new_trees <- n_runs_new_trees\n_runs_new_trees
per_runs_new_trees <- n_runs_new_trees\nrow(n_runs_new_trees)
per_runs_new_trees <- n_runs_new_trees/nrow(n_runs_new_trees)
n_runs_new_trees <- sum(run_data$n_trees_available_end - run_data$n_trees_available_start > 0)
per_runs_new_trees <- n_runs_new_trees/nrow(n_runs_new_trees)
per_runs_new_trees <- round(n_runs_new_trees/nrow(n_runs_new_trees)*100)
per_runs_new_trees
per_runs_new_trees <- round(n_runs_new_trees/nrow(n_runs_new_trees) * 100
per_runs_new_trees
per_runs_new_trees
per_runs_new_trees <- round(n_runs_new_trees/nrow(n_runs_new_trees)) * 100
per_runs_new_trees
per_runs_new_trees
run_data$n_trees_available_end - run_data$n_trees_available_start
n_runs_new_trees <- sum(run_data$n_trees_available_end - run_data$n_trees_available_start > 0)
n_runs_new_trees
per_runs_new_trees <- round(n_runs_new_trees/nrow(run_data)) * 100
per_runs_new_trees
n_runs_new_trees <- sum((run_data$n_trees_available_end - run_data$n_trees_available_start > 0))
per_runs_new_trees
run_data$new_trees <- run_data$n_trees_available_end - run_data$n_trees_available_start
n_runs_new_trees <- sum(run_data$new_trees > 0)
per_runs_new_trees <- round(n_runs_new_trees/nrow(run_data)) * 100
per_runs_new_trees
per_runs_new_trees <- round(n_runs_new_trees/nrow(run_data),2) * 100
per_runs_new_trees
env_data <- fread("Data/EXP12_Mem_Safe_Env_75k_100s_2000t.csv")
env_data <- fread("../../Panda_ABM_Analysis/Data/EXP12_Mem_Safe_Env_75k_100s_2000t.csv")
key <- c("Static Trees", "Dynamic Trees")
names(key) <- c(0,1)
for(id in unique(env_data$run_id)){
n <- nrow(env_data[env_data$run_id == id,])
env_data$ts[env_data$run_id == id] <- c(0:(n-1))
}
env_data <- subset(env_data, !(ts %in% c(0)))
env_data <- left_join(env_data, run_data)
ggplot(env_data, aes(x = ts, y = as.numeric(trees_available))) +
geom_path(aes(group = run_id), alpha = .5) +
labs(x = "Time", y = "Number of Trees Available")+
facet_wrap(~treessdie, labeller = labeller(treessdie = key))+
base_theme
knitr::opts_chunk$set(
warning = FALSE,
messages = FALSE
)
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
a <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
b <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme +
theme(legend.position = "none")
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
c <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme +
theme(legend.position = "none")
grid.arrange(a,b,c,
ncol = 1)
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
a <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
b <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme +
theme(legend.position = "none")
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
c <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme +
theme(legend.position = "none")
grid.arrange(a,b,c,
ncol = 3)
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
a <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme + theme(axis.title = element_blank())
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
b <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme +
theme(legend.position = "none")
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
c <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme +
theme(legend.position = "none")
grid.arrange(a,b,c,
ncol = 3)
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
a <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250))
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
b <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme +
theme(legend.position = "none")
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
c <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
base_theme +
theme(legend.position = "none")
grid.arrange(a,b,c,
ncol = 3)
maptheme <- base_theme + theme(axis.title = element_blank())
tools <- fread("../../Panda_ABM_Analysis/Data/EXP12_MemSafe_tools_25k.csv")
tools <- fread("../../Panda_ABM_Analysis/Data/EXP12_MemSafe_tools_25k.csv")
tools$s_id <- paste(tools$run_id, tools$source_id)
source_join <- sources[,c("s_id", "x", "y")]
colnames(source_join) <- c("s_id", "s_x", "s_y")
tools <- left_join(tools, source_join, by = c("s_id" = "s_id"))
library(data.table)
library(dplyr)
library(ggplot2)
library(gridExtra)
## Figure theme
base_theme <- theme(axis.text = element_text(size = 5),
axis.title = element_text(size = 6),
panel.background = element_rect(color = "black", fill = "white"))
## Load Data
run_data <- fread("../../Panda_ABM_Analysis/Data/EXP_12_Mem_Safe_Run_Data.csv")
OGs <- fread("../../Panda_ABM_Analysis/Data/EXP12_Mem_Safe_All_OG.csv")
sources <- fread("../../Panda_ABM_Analysis/Data/EXP12_MemSafe_All_sources.csv")
OGs <- left_join(OGs, run_data)
OGs_75k <- subset(OGs, n_time_steps == 75000)
sources$s_id <- paste(sources$run_id, sources$id)
OGs_75k$s_id <- paste(OGs_75k$run_id, OGs_75k$source_id)
source_join <- sources[,c("s_id", "x", "y")]
colnames(source_join) <- c("s_id", "s_x", "s_y")
OGs_75k <- left_join(OGs_75k, source_join, by = c("s_id" = "s_id"))
OGs_75k$d2source <- sqrt(((OGs_75k$x-OGs_75k$s_x)^2) +
((OGs_75k$y-OGs_75k$s_y)^2))
n_runs_no_tool_use <- nrow(run_data[run_data$n_trees_available_start == 0,])
per_runs_no_tool_use <- round(n_runs_no_tool_use/nrow(run_data) * 100)
res <- anova(lm(run_data$n_trees_available_start~run_data$num_nutree + run_data$num_sources))
res_F_trees <- round(res$`F value`[1], 2)
res_F_sources <- res$`F value`[2]
res_P_trees <- res$`Pr(>F)`[1]
OGs_sum <- OGs_75k %>% group_by(run_id, rm_quality) %>%
summarize(max_d2_source = max(d2source))
OGs_sum <- left_join(OGs_sum, run_data)
n_maxD_greater_than_three <- sum(OGs_sum$max_d2_source > 3)
per_maxD_greater_than_three <- round(n_maxD_greater_than_three/nrow(OGs_sum) * 100)
max_d <- round(max(OGs_sum$max_d2_source))
run_data$new_trees <- run_data$n_trees_available_end - run_data$n_trees_available_start
n_runs_new_trees <- sum(run_data$new_trees > 0)
per_runs_new_trees <- round(n_runs_new_trees/nrow(run_data),2) * 100
a <- ggplot(OGs_sum, aes(x = as.factor(num_sources), y = max_d2_source, fill = as.factor(num_nutree))) +
geom_boxplot(show.legend = FALSE)+
labs(x = "Number of Sources", y = "Distance to Source")+
scale_fill_brewer(palette = "Greys")+
base_theme
b <- ggplot(run_data, aes(x = as.factor(num_sources), y = run_data$n_trees_available_end - run_data$n_trees_available_start, fill = as.factor(num_nutree)))+
geom_boxplot(show.legend = FALSE) +
scale_y_log10() +
scale_fill_brewer(palette = "Greys")+
labs(x = "Number of Sources", y = "N new trees")+
base_theme
leg <- ggplot(OGs_sum, aes(x = as.factor(num_sources), y = max_d2_source, fill = as.factor(num_nutree))) +
geom_boxplot() + scale_fill_brewer(palette = "Greys") +
labs(fill = "Number of Trees")+
theme(legend.direction = "horizontal",
legend.position = c(.5,.5),
legend.title = element_text(size = 6),
legend.text = element_text(size = 5),
legend.key.size = unit(.5, "line"),
plot.margin = unit(c(0,0,0,0), "cm"))
leg <- ggpubr::get_legend(leg)
lay <- rbind(c(NA,1,1,NA),
c(2,2,3,3),
c(2,2,3,3))
grid.arrange(leg,a,b, layout_matrix = lay)
env_data <- fread("../../Panda_ABM_Analysis/Data/EXP12_Mem_Safe_Env_75k_100s_2000t.csv")
key <- c("Static Trees", "Dynamic Trees")
names(key) <- c(0,1)
for(id in unique(env_data$run_id)){
n <- nrow(env_data[env_data$run_id == id,])
env_data$ts[env_data$run_id == id] <- c(0:(n-1))
}
env_data <- subset(env_data, !(ts %in% c(0)))
env_data <- left_join(env_data, run_data)
ggplot(env_data, aes(x = ts, y = as.numeric(trees_available))) +
geom_path(aes(group = run_id), alpha = .5) +
labs(x = "Time", y = "Number of Trees Available")+
facet_wrap(~treessdie, labeller = labeller(treessdie = key))+
base_theme
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
maptheme <- base_theme + theme(axis.title = element_blank(),
axis.text = element_blank())
a <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
b <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme +  theme(legend.position = "none")
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
c <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme +
theme(legend.position = "none")
grid.arrange(a,b,c,
ncol = 3)
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
maptheme <- base_theme + theme(axis.title = element_blank(),
axis.text = element_blank())
a <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
b <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme +  theme(legend.position = "none")
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
c <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme +
theme(legend.position = "none")
grid.arrange(a,b,c,
ncol = 3)
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
maptheme <- base_theme + theme(axis.title = element_blank(),
axis.text = element_blank())
a <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
b <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme +  theme(legend.position = "none")
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
c <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme +
theme(legend.position = "none")
grid.arrange(a,b,c,
ncol = 3)
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_A_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
maptheme <- base_theme + theme(axis.title = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank())
a <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_b_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
b <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme +  theme(legend.position = "none")
xsources <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_sources.csv")
xtrees <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_trees.csv")
xtools <- fread("../../Panda_ABM_Analysis/Data/Figure_3/Plot_c_tools.csv")
xtools <- xtools %>% group_by(x,y) %>% summarise(N_tools = n())
c <- ggplot() +
geom_raster(data = xtools, aes(x = x, y = y, fill = N_tools))+
geom_point(data = xsources, aes(x = x, y = y), color = "grey", size = 1)+
coord_equal()+
scale_x_continuous(limits = c(0,250)) +
scale_y_continuous(limits = c(0,250)) +
maptheme +
theme(legend.position = "none")
grid.arrange(a,b,c,
ncol = 3)
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
tools <- fread("../../Panda_ABM_Analysis/Data/EXP12_MemSafe_tools_25k.csv")
tools$s_id <- paste(tools$run_id, tools$source_id)
source_join <- sources[,c("s_id", "x", "y")]
colnames(source_join) <- c("s_id", "s_x", "s_y")
tools <- left_join(tools, source_join, by = c("s_id" = "s_id"))
tools$d2source <- sqrt(((tools$x-tools$s_x)^2) + ((tools$y-tools$s_y)^2))
tools_sum <- tools %>%
group_by(run_id, x, y) %>%
summarise(n_tools = n(),
min_d2_source = min(d2source),
n_pounding = sum(Tool_size >=2000))
tools_sum <- left_join(tools_sum, run_data)
Tool_sum_sub <- subset(tools_sum, num_sources == 100 & num_nutree == 2000 & treessdie == 1)
OGs_sum <- OGs_75k %>% group_by(run_id, x, y) %>%
summarise(n_hammers = n(),
min_d2_source = min(d2source),
med_d2_source = median(d2source),
max_d2_source = max(d2source),
mean_uses = mean(n_uses))
a <- ggplot(Tool_sum_sub, aes(x = min_d2_source, y= n_tools)) +
geom_point()
test <- left_join(OGs_sum, run_data, by = c("run_id" = "run_id"))
OGs_sum_sub <- subset(test, num_sources == 100 & num_nutree == 2000 & treessdie == 1)
b <- ggplot(OGs_sum_sub, aes(x = min_d2_source, y = n_hammers)) + geom_point()
OGS_sub <- subset(OGs_75k, num_sources == 100 & num_nutree == 2000 & treessdie == 1)
c <- ggplot(OGS_sub, aes(x = d2source, y=Tool_size)) + geom_point()
grid.arrange(a,b,c, ncol=3)
